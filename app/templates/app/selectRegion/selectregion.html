<html>
    <head>
        <title>Image Processs</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-jcrop/0.9.15/css/jquery.Jcrop.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-jcrop/0.9.15/js/jquery.Jcrop.js"></script>
        </head>
    <body>
        <div id="container">
            <img src="test1.jpeg" alt="" id="image" style="position: relative">
            <canvas id="canvas" width="700" height="700" style="position: absolute; top: 8px;left: 8px"></canvas>
        </div>
        <button type="button" id="confirm" hidden="True" onclick="getResult()">confirm</button>
        <button type="button" id="done" onclick="getRegions()">done</button>
        <script>
            let img = document.getElementById("image");
            let element = document.getElementById("confirm");
            let hidden = element.getAttribute("hidden");
            var selectResult;
            var regions = [];
            $(document).ready(function(){
                $('#image').Jcrop({
                    onSelect: function(c){
                        if (hidden) {
                            element.removeAttribute("hidden");
                        }
                        selectResult = $(this).attr('result');
                        selectResult = [c.x,c.y,c.w,c.h]
                    }
                })
            })
            function drawRectangle(left, top, width, height) {
                var canvas = document.getElementById('canvas');
                var context = canvas.getContext('2d');
                var img = document.getElementById('image');
                context.beginPath();
                context.lineWidth = "4";
                context.strokeStyle = "white";
                context.rect(left, top, width, height);
                context.stroke();
            }
            function getResult() {
                drawRectangle(selectResult[0], selectResult[1], selectResult[2], selectResult[3]);
                console.log(selectResult);
                regions.push(selectResult);
                element.setAttribute("hidden","False");
            }
            function getRegions() {
                console.log(regions);
            }
        </script>
    </body>    
</html>